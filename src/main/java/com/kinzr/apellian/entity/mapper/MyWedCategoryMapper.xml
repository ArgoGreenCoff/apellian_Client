<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kinzr.apellian.entity.mapper.MyWedCategoryMapper">
  <resultMap id="BaseResultMap" type="com.kinzr.apellian.entity.model.MyWedCategory">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Apr 28 16:45:02 KST 2020.
    -->
    <id column="ID_WEDDING" jdbcType="BIGINT" property="idWedding" />
    <id column="CD_CATEGORY" jdbcType="INTEGER" property="cdCategory" />
    <result column="ID_WEDDING_HALL" jdbcType="INTEGER" property="idWeddingHall" />
    <result column="CD_COMPANY" jdbcType="INTEGER" property="cdCompany" />
    <result column="NM_COMPANY" jdbcType="VARCHAR" property="nmCompany" />
    <result column="AM_PRICE" jdbcType="BIGINT" property="amPrice" />
    <result column="ID_REF" jdbcType="VARCHAR" property="idRef" />
    <result column="NM_CATEGORY" jdbcType="VARCHAR" property="nmCategory" />
  </resultMap>
  <delete id="deleteByPrimaryKey" parameterType="map">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Apr 28 16:45:02 KST 2020.
    -->
    delete from MY_WED_CATEGORY
    where ID_WEDDING = #{idWedding,jdbcType=BIGINT}
      and CD_CATEGORY = #{cdCategory,jdbcType=INTEGER}
      <!--  and ID_WEDDING_HALL = #{idWeddingHall,jdbcType=INTEGER} -->
  </delete>
  <insert id="insert" parameterType="com.kinzr.apellian.entity.model.MyWedCategory">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Apr 28 16:45:02 KST 2020.
    -->
    insert into MY_WED_CATEGORY (ID_WEDDING, CD_CATEGORY, ID_WEDDING_HALL, 
      CD_COMPANY, AM_PRICE, ID_REF
      )
    values (#{idWedding,jdbcType=BIGINT}, #{cdCategory,jdbcType=INTEGER}, #{idWeddingHall,jdbcType=INTEGER}, 
      #{cdCompany,jdbcType=INTEGER}, #{amPrice,jdbcType=BIGINT}, #{idRef,jdbcType=VARCHAR}
      )
  </insert>
  <update id="updateByPrimaryKey" parameterType="com.kinzr.apellian.entity.model.MyWedCategory">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Apr 28 16:45:02 KST 2020.
    -->
    update MY_WED_CATEGORY
    set CD_COMPANY = #{cdCompany,jdbcType=INTEGER},
      AM_PRICE = #{amPrice,jdbcType=BIGINT},
      ID_REF = #{idRef,jdbcType=VARCHAR}
    where ID_WEDDING = #{idWedding,jdbcType=BIGINT}
      and CD_CATEGORY = #{cdCategory,jdbcType=INTEGER}
      <!--  and ID_WEDDING_HALL = #{idWeddingHall,jdbcType=INTEGER} -->
  </update>
  <select id="selectByPrimaryKey" parameterType="map" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Apr 28 16:45:02 KST 2020.
    -->
    select ID_WEDDING, CD_CATEGORY, ID_WEDDING_HALL, CD_COMPANY, AM_PRICE, ID_REF
    from MY_WED_CATEGORY
    where ID_WEDDING = #{idWedding,jdbcType=BIGINT}
      and CD_CATEGORY = #{cdCategory,jdbcType=INTEGER}
      <!--  and ID_WEDDING_HALL = #{idWeddingHall,jdbcType=INTEGER} -->
  </select>
  <select id="selectAll" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Apr 28 16:45:02 KST 2020.
    -->
    select ID_WEDDING, CD_CATEGORY, ID_WEDDING_HALL, CD_COMPANY, AM_PRICE, ID_REF
    from MY_WED_CATEGORY
  </select>
  <select id="selectByidWedding" parameterType="java.lang.Long" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Apr 28 16:45:02 KST 2020.
    -->
    select B.ID_WEDDING, B.ID_WEDDING_HALL, B.CD_CATEGORY, B.CD_COMPANY, B.AM_PRICE, B.ID_REF
		, C.NM_CATEGORY
		, CASE IFNULL(D.NM_COMPANY, '') WHEN  '' THEN B.NM_COMPANY ELSE D.NM_COMPANY END AS NM_COMPANY
    from MY_WED A, MY_WED_CATEGORY B    
    left join Apellian.CD_CATEGORY C on C.CD_CATEGORY = B.CD_CATEGORY 
    left join Apellian.CD_COMPANY D on D.CD_COMPANY = B.CD_COMPANY     
    WHERE A.ID_WEDDING = #{idWedding,jdbcType=BIGINT}
     AND A.ID_WEDDING = B.ID_WEDDING     
     ;
  </select>  
  <select id="selectSumByCtgyidWedding" parameterType="java.lang.Long" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Apr 28 16:45:02 KST 2020.
    -->
    select SUM(B.AM_PRICE) AS AM_PRICE
    from MY_WED A, MY_WED_CATEGORY B    
    WHERE A.ID_WEDDING = #{idWedding,jdbcType=BIGINT}
     AND A.ID_WEDDING = B.ID_WEDDING      
  </select>  
  <update id="updateByAmPrice" parameterType="com.kinzr.apellian.entity.model.MyWedCategory">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Apr 28 16:45:02 KST 2020.
    -->
    update MY_WED_CATEGORY
    set CD_COMPANY = #{cdCompany,jdbcType=INTEGER},
      AM_PRICE = #{amPrice,jdbcType=BIGINT},
      NM_COMPANY = #{nmCompany,jdbcType=VARCHAR}
    where ID_WEDDING = #{idWedding,jdbcType=BIGINT}
      and CD_CATEGORY = #{cdCategory,jdbcType=INTEGER}      
  </update>
  	
  
</mapper>