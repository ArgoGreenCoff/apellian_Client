<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kinzr.apellian.entity.mapper.MagazineMapper">
  <resultMap id="BaseResultMap" type="com.kinzr.apellian.entity.model.Magazine">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Apr 27 15:07:22 KST 2020.
    -->
    <id column="ID_MAGAZINE" jdbcType="INTEGER" property="idMagazine" />
    <result column="NM_MAGAZINE" jdbcType="VARCHAR" property="nmMagazine" />
    <result column="DS_MAGAZINE" jdbcType="VARCHAR" property="dsMagazine" />
    <result column="CT_VIEW" jdbcType="BIGINT" property="ctView" />
    <result column="YN_PUBLISH" jdbcType="CHAR" property="ynPublish" />
    <result column="ID_REG" jdbcType="VARCHAR" property="idReg" />
    <result column="DT_REG" jdbcType="TIMESTAMP" property="dtReg" />
    <result column="DS_CONTENT" jdbcType="LONGVARCHAR" property="dsContent" />
    <result column="URL_BLOG" jdbcType="LONGVARCHAR" property="urlBlog" />
    <result column="URL_IMG" jdbcType="LONGVARCHAR" property="urlImg" />
  </resultMap>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Apr 27 15:07:22 KST 2020.
    -->
    delete from MAGAZINE
    where ID_MAGAZINE = #{idMagazine,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.kinzr.apellian.entity.model.Magazine">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Apr 27 15:07:22 KST 2020.
    -->
    insert into MAGAZINE (ID_MAGAZINE, NM_MAGAZINE, DS_MAGAZINE, 
      CT_VIEW, YN_PUBLISH, ID_REG, 
      DT_REG, DS_CONTENT, URL_BLOG, URL_IMG
      )
    values (#{idMagazine,jdbcType=INTEGER}, #{nmMagazine,jdbcType=VARCHAR}, #{dsMagazine,jdbcType=VARCHAR}, 
      #{ctView,jdbcType=BIGINT}, #{ynPublish,jdbcType=CHAR}, #{idReg,jdbcType=VARCHAR}, 
      #{dtReg,jdbcType=TIMESTAMP}, #{dsContent,jdbcType=LONGVARCHAR}, #{urlBlog,jdbcType=LONGVARCHAR}, #{urlImg,jdbcType=LONGVARCHAR}
      )
  </insert>
  <update id="updateByPrimaryKey" parameterType="com.kinzr.apellian.entity.model.Magazine">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Apr 27 15:07:22 KST 2020.
    -->
    update MAGAZINE
    set NM_MAGAZINE = #{nmMagazine,jdbcType=VARCHAR},
      DS_MAGAZINE = #{dsMagazine,jdbcType=VARCHAR},
      CT_VIEW = #{ctView,jdbcType=BIGINT},
      YN_PUBLISH = #{ynPublish,jdbcType=CHAR},
      ID_REG = #{idReg,jdbcType=VARCHAR},
      DT_REG = #{dtReg,jdbcType=TIMESTAMP},
      DS_CONTENT = #{dsContent,jdbcType=LONGVARCHAR},
      URL_BLOG = #{urlBlog,jdbcType=LONGVARCHAR},
      URL_IMG = #{urlImg,jdbcType=LONGVARCHAR}
    where ID_MAGAZINE = #{idMagazine,jdbcType=INTEGER}
  </update>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Apr 27 15:07:22 KST 2020.
    -->
    select ID_MAGAZINE, NM_MAGAZINE, DS_MAGAZINE, CT_VIEW, YN_PUBLISH, ID_REG, DT_REG, 
    DS_CONTENT, URL_BLOG, URL_IMG
    from MAGAZINE
    where ID_MAGAZINE = #{idMagazine,jdbcType=INTEGER} 
  </select>
  
  
  
  <select id="selectAll" parameterType="java.lang.String" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Apr 27 15:07:22 KST 2020.
    -->
    select MAGAZINE_CATEGORY_LIST.CD_MAGAZINE_CATEGORY, MAGAZINE_CATEGORY_LIST.ID_MAGAZINE, MAGAZINE.NM_MAGAZINE, MAGAZINE.DS_MAGAZINE, MAGAZINE.CT_VIEW, MAGAZINE.YN_PUBLISH, MAGAZINE.ID_REG, MAGAZINE.DT_REG, 
    MAGAZINE.DS_CONTENT, MAGAZINE.URL_BLOG, MAGAZINE.URL_IMG
    from MAGAZINE join MAGAZINE_CATEGORY_LIST
    on MAGAZINE.ID_MAGAZINE = MAGAZINE_CATEGORY_LIST.ID_MAGAZINE
	where MAGAZINE_CATEGORY_LIST.CD_MAGAZINE_CATEGORY = #{category,jdbcType=VARCHAR} AND YN_PUBLISH = "Y"
  </select>
  
  
  
	<select id="selectPreMagazine" parameterType="java.lang.Integer" resultMap="BaseResultMap">
	    <!--
	    	이전 메거진 아이디 가져오기
	    -->
	    select ID_MAGAZINE, NM_MAGAZINE, DS_MAGAZINE, CT_VIEW, YN_PUBLISH, ID_REG, DT_REG, DS_CONTENT, URL_BLOG, URL_IMG
	    from MAGAZINE
	    where ID_MAGAZINE=(select max(ID_MAGAZINE) from (select * from MAGAZINE where YN_PUBLISH = "Y")publish where ID_MAGAZINE <![CDATA[<]]>  #{idMagazine,jdbcType=INTEGER})
 	</select>
	<select id="selectNextMagazine" parameterType="java.lang.Integer" resultMap="BaseResultMap">
	    <!--
	    	다음 메거진 아이디 가져오기
	    -->
	    select ID_MAGAZINE, NM_MAGAZINE, DS_MAGAZINE, CT_VIEW, YN_PUBLISH, ID_REG, DT_REG, DS_CONTENT, URL_BLOG, URL_IMG
	    from MAGAZINE
	    where ID_MAGAZINE=(select min(ID_MAGAZINE) from MAGAZINE where ID_MAGAZINE <![CDATA[>]]> #{idMagazine,jdbcType=INTEGER})
 	</select>
  
  
  
	<select id="selectSearch" parameterType="java.lang.String" resultMap="BaseResultMap">
		<!--
			검색 
		-->
	   select ID_MAGAZINE, NM_MAGAZINE, DS_MAGAZINE, CT_VIEW, YN_PUBLISH, ID_REG, DT_REG, 
	   DS_CONTENT, URL_BLOG, URL_IMG
	   from MAGAZINE 
	   where NM_MAGAZINE LIKE '%${search,jdbcType=VARCHAR}%'
	</select>
  
    	<select id="selectSavedList" parameterType="java.lang.String" resultMap="BaseResultMap">
		<!--
			북마크 
		-->
		select MAGAZINE.ID_MAGAZINE, MAGAZINE.NM_MAGAZINE, MAGAZINE.DS_MAGAZINE, MAGAZINE.CT_VIEW, MAGAZINE.YN_PUBLISH, MAGAZINE.ID_REG, MAGAZINE.DT_REG, 
		MAGAZINE.DS_CONTENT, MAGAZINE.URL_BLOG, MAGAZINE.URL_IMG
		from MAGAZINE join MAGAZINE_SAVED_LIST
		on MAGAZINE.ID_MAGAZINE = MAGAZINE_SAVED_LIST.ID_MAGAZINE
		where MAGAZINE_SAVED_LIST.ID_USER = '${idUser,jdbcType=VARCHAR}'
	</select>
  
  
</mapper>